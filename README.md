# Сайт с достопримечательностями Москвы

Интерактивная карта Москвы, на которой можно добавить виды активного отдыха с подробными описаниями и комментариями, на что обратить внимание на прогулке по Москве.

 - [Основной сайт](https://dumbturtle.pythonanywhere.com/)
 - [Панель администрирования сайта](https://dumbturtle.pythonanywhere.com/admin)

## Установка и настройка

### Установка 

Скачать скрипт с [github](https://github.com/dumbturtle/). Установить необходимые пакеты: 
     
```
$ pip install -r requirements.txt
```

Создайте внутри папки ```where_to_go``` папки ```/static/``` и ```/media/```.

Запустите применение миграций:

```
$ python manage.py migrate
```

Создайте пользователя с правами администрирования сайта:

```
$ python manage.py createsuperuser
```

Запустите:
```
$ python manage.py runserver
```

После запуска сайт будет доступен локально по адресу: [```http://127.0.0.1:8000```](http://127.0.0.1:8000). Панель администрирования сайта:[```http://127.0.0.1:8000/admin```](http://127.0.0.1:8000/admin)

### Настройка

Для настройки сайта используются переменные окружения. Пример файла настройки: ```.env-tmp```.

Доступны следующие настройки:
 - ```SECRET_KEY``` - секретный ключ. Используется для криптографической подписи, должен быть случайным и сложным для подбора. Набор любых символов длинной не менее 50 символов.
 - ```DEBUG``` - включение отладочного режима.
 - ```ALLOWED_HOSTS``` - список хостов/доменов, для которых может работать текущий сайт. 
 - ```CSRF_COOKIE_SECURE``` - указывает, использовать ли безопасные куки для CSRF. 
 - ```STATIC_ROOT``` - Абсолютный путь к каталогу, в который collectstatic соберет все статические файлы.
 - ```MEDIA_ROOT``` - Абсолютный путь к каталогу, в котором хранятся медиа-файлы, используется для работы с файлами.
 - ```INTERNAL_IPS``` - список хостов/доменов, для которых можно включить режим отладки.

### Ввод данных
#### Ввод через панель администрирования

[Панель администрирования сайта](https://dumbturtle.pythonanywhere.com/admin)

#### Ввод через панель администрирования

Данные можно загружать через скрипт скачивающий файл в формате JSON.

Запустите:
```
$ python manage.py load_place "ссылка на JSON"
```

Формат JSON-файла:
```
{
    "title": "Название",
    "imgs": [
        "Ссылка на изображение места 1",
        "Ссылка на изображение места 2",
    ],
    "description_short": "Короткое описание",
    "description_long": "Полное описание",
    "coordinates": {
        "lng": "Широта",
        "lat": "Долгота"
    }
}
```
После успешного скачивания в консоль выведется: ```"Данные по месту "название места" записаны в базу"```


 ## Цели проекта

Код написан в учебных целях — для курса по Python и веб-разработке на сайте [Devman](https://dvmn.org).